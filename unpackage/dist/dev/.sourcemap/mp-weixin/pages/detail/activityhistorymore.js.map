{"version":3,"file":"activityhistorymore.js","sources":["pages/detail/activityhistorymore.vue","D:/Hbuild/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2FjdGl2aXR5aGlzdG9yeW1vcmUudnVl"],"sourcesContent":["<template>\n\t<uni-nav-bar\n\t  statusBar=\"true\"\n\t  backgroundColor=\"#ff4757\"\n\t  fixed=\"true\"\n\t  :border=\"false\"\n\t  leftIcon=\"left\"\n\t  @clickLeft=\"onBack\"\n\t>\n\t  <!-- 居中标题插槽 -->\n\t  <template v-slot:default>\n\t    <view class=\"navbar-center\">\n\t      <text class=\"navbar-title\">历史活动</text>\n\t    </view>\n\t  </template>\n\t</uni-nav-bar>\n\n\t<scroll-view \n\t\tscroll-y=\"true\" \n\t\tstyle=\"height: calc(100vh - 44px);\" \n\t\t@scrolltolower=\"onReachBottom\"\n\t\tlower-threshold=\"50\"\n\t\trefresher-enabled=\"true\"\n\t\t:refresher-triggered=\"refreshing\"\n\t\t@refresherrefresh=\"onRefresh\"\n\t>\n\t\t<HorizontalActivityCard  \n\t\t\tv-for=\"item in EventStore.eventoutdate\"\n\t\t\t:key=\"item.id\"\n\t\t\t:imgSrc=\"item.cover_image_url\"\n\t\t\t:title=\"item.title\"\n\t\t\t:date=\"formatEventDate(item.event_start_time,item.event_end_time)\"\n\t\t\t:location=\"item.event_address\"\n\t\t\tstatus=\"已结束\"\n\t\t\t@click=\"handleCardClick(item.id)\"\n\t\t/>\n\t\t\n\t\t<!-- 加载状态提示 -->\n\t\t<view class=\"load-more-container\">\n\t\t\t<view v-if=\"EventStore.outdateIsLoading && EventStore.eventoutdate.length > 0\" class=\"loading-tip\">\n\t\t\t\t<uni-load-more status=\"loading\" />\n\t\t\t</view>\n\t\t\t<view v-else-if=\"!EventStore.outdateHasMoreData && EventStore.eventoutdate.length > 0\" class=\"loading-tip\">\n\t\t\t\t<uni-load-more status=\"noMore\" />\n\t\t\t</view>\n\t\t\t<view v-else-if=\"EventStore.eventoutdate.length === 0 && !EventStore.outdateIsLoading\" class=\"empty-tip\">\n\t\t\t\t<text>暂无历史活动数据</text>\n\t\t\t</view>\n\t\t</view>\n\t</scroll-view>\n\t\n</template>\n\n<script setup>\nimport {ref,onMounted} from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\nimport {useEventstore} from '@/store/Event.js'\t\nimport {formatEventDate} from '@/utils/data.js'\n\n// 初始化pinia\nconst EventStore=useEventstore()\n\n// 下拉刷新状态\nconst refreshing = ref(false)\n\n// 活动点击逻辑\nfunction handleCardClick(eventData) {\n  console.log(\"点击了卡片:\", eventData);\n  const disable = true\n  \tuni.navigateTo({\n  \turl: `/pages/detail/activitydetail?id=${eventData}&disable=${disable}` // 举例，传递 title 作为参数\n  });\n}\n\n// 返回函数\nfunction onBack() {\n  uni.navigateBack();\n}\n\n// 触底加载更多\nconst onReachBottom = async () => {\n\tconsole.log('触底了，开始加载更多历史活动')\n\tif (EventStore.outdateHasMoreData && !EventStore.outdateIsLoading) {\n\t\tawait EventStore.loadMoreOutdateEvents()\n\t}\n}\n\n// 下拉刷新\nconst onRefresh = async () => {\n\trefreshing.value = true\n\ttry {\n\t\tawait EventStore.refreshOutdateEvents()\n\t} finally {\n\t\trefreshing.value = false\n\t}\n}\n\nonLoad(()=>{\n\tEventStore.getlisoutdate(10)\n})\n</script>\n\n<style>\n@import \"../../style/detail.css\";\n\n.load-more-container {\n\tpadding: 20rpx;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n}\n\n.loading-tip {\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 20rpx 0;\n}\n\n.empty-tip {\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding: 100rpx 0;\n\tcolor: #999;\n\tfont-size: 28rpx;\n}\n</style>","import MiniProgramPage from 'E:/project/uniapp/uniapp-news/pages/detail/activityhistorymore.vue'\nwx.createPage(MiniProgramPage)"],"names":["useEventstore","ref","uni","onLoad","MiniProgramPage"],"mappings":";;;;;;;;;;;;;;;;;;;AA4DA,UAAM,aAAWA,YAAAA,cAAe;AAGhC,UAAM,aAAaC,cAAG,IAAC,KAAK;AAG5B,aAAS,gBAAgB,WAAW;AAClCC,qFAAY,UAAU,SAAS;AAC/B,YAAM,UAAU;AACfA,oBAAAA,MAAI,WAAW;AAAA,QACf,KAAK,mCAAmC,SAAS,YAAY,OAAO;AAAA;AAAA,MACvE,CAAG;AAAA,IACH;AAGA,aAAS,SAAS;AAChBA,oBAAG,MAAC,aAAY;AAAA,IAClB;AAGA,UAAM,gBAAgB,YAAY;AACjCA,oBAAAA,iEAAY,gBAAgB;AAC5B,UAAI,WAAW,sBAAsB,CAAC,WAAW,kBAAkB;AAClE,cAAM,WAAW,sBAAuB;AAAA,MACxC;AAAA,IACF;AAGA,UAAM,YAAY,YAAY;AAC7B,iBAAW,QAAQ;AACnB,UAAI;AACH,cAAM,WAAW,qBAAsB;AAAA,MACzC,UAAW;AACT,mBAAW,QAAQ;AAAA,MACnB;AAAA,IACF;AAEAC,kBAAAA,OAAO,MAAI;AACV,iBAAW,cAAc,EAAE;AAAA,IAC5B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClGD,GAAG,WAAWC,SAAe;"}