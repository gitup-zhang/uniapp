{"version":3,"file":"mes.js","sources":["pages/mes/mes.vue","D:/Hbuild/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbWVzL21lcy52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 未登录状态 -->\n    <view v-if=\"!isLoggedIn\" class=\"login-required\">\n      <view class=\"login-card\">\n        <view class=\"login-icon\">🔐</view>\n        <text class=\"login-title\">请先登录</text>\n        <text class=\"login-desc\">登录后即可查看和管理您的消息</text>\n        <button class=\"login-btn\" @tap=\"goToLogin\">\n          <text class=\"login-btn-text\">立即登录</text>\n        </button>\n      </view>\n    </view>\n\n    <!-- 已登录状态 - 显示消息界面 -->\n    <view v-else class=\"message-container\">\n      <!-- 自定义导航栏 -->\n      <view class=\"custom-navbar\">\n        <view class=\"status-bar\" :style=\"{ height: statusBarHeight + 'px' }\"></view>\n        <view class=\"nav-content\">\n          <text class=\"nav-title\">消息</text>\n          <!-- 可选：添加登出按钮 -->\n          <!-- <view class=\"nav-right\">\n            <view class=\"logout-btn\" @tap=\"handleLogout\">\n              <text class=\"logout-text\">登出</text>\n            </view>\n          </view> -->\n        </view>\n      </view>\n      \n      <!-- 固定筛选标签 -->\n      <view class=\"filter-tabs-fixed\" :style=\"{ top: statusBarHeight + 44 + 'px' }\">\n        <view class=\"tabs-container\">\n          <view \n            class=\"filter-tab\" \n            :class=\"{ active: activeTab === 'all' }\"\n            @tap=\"switchTab('all')\"\n          >\n            全部\n             <view class=\"tab-badge\" v-if=\"unreadCount > 0\">{{ unreadCount > 99 ? '99+' : unreadCount }}</view>\n          </view>\n          <view \n            class=\"filter-tab\" \n            :class=\"{ active: activeTab === 'system' }\"\n            @tap=\"switchTab('system')\"\n          >\n            系统消息\n              <view class=\"tab-badge\" v-if=\"systemUnreadCount > 0\">{{ systemUnreadCount }}</view>\n          </view>\n          <view \n            class=\"filter-tab\" \n            :class=\"{ active: activeTab === 'group' }\"\n            @tap=\"switchTab('group')\"\n          >\n            群组消息\n             <view class=\"tab-badge\" v-if=\"groupUnreadCount > 0\">{{ groupUnreadCount }}</view>\n          </view>\n        </view>\n        \n        <!-- 一键已读按钮 -->\n        <view \n          class=\"mark-all-read-btn\" \n          @tap=\"markAllAsRead\"\n          v-if=\"unreadCount > 0\"\n        >\n          <text class=\"mark-all-icon\">✓</text>\n          <text class=\"mark-all-text\">全部已读</text>\n        </view>\n      </view>\n      \n      <!-- 消息列表 - 使用recycle-view优化长列表性能 -->\n      <recycle-view\n        class=\"message-list\"\n        :style=\"{ marginTop: statusBarHeight + 44 + 68 + 'px' }\"\n        :enable-back-to-top=\"true\"\n        :bounces=\"false\"\n        batch=\"8\"\n        cache=\"4\"\n      >\n        <recycle-item \n          v-for=\"(msg, index) in filteredMessages\" \n          :key=\"`msg-${msg.id}`\"\n          class=\"message-item-wrapper\"\n        >\n          <view \n            class=\"message-item\" \n            :class=\"messageItemClass(msg)\"\n            @tap=\"handleMessageTap(msg, index)\"\n          >\n            <!-- 消息类型指示器 - 简化 -->\n            <view class=\"message-indicator\">\n              <view class=\"indicator-dot\" :class=\"msg.type\"></view>\n            </view>\n            \n            <!-- 头像/图标 - 优化图片加载 -->\n            <view class=\"avatar-container\">\n              <image \n                v-if=\"msg.type === 'group'\" \n                :src=\"msg.avatar\" \n                class=\"avatar group-avatar\"\n                mode=\"aspectFill\"\n                :lazy-load=\"true\"\n                :fade-show=\"false\"\n                @error=\"handleAvatarError\"\n              />\n              <view v-else class=\"system-icon\">\n                <text class=\"icon\">📢</text>\n              </view>\n              <!-- 简化未读小红点 -->\n              <view v-if=\"!msg.isRead\" class=\"unread-badge\"></view>\n            </view>\n            \n            <!-- 消息内容 - 优化布局 -->\n            <view class=\"msg-content\">\n              <!-- 标题行 - 单独一行确保不被遮挡 -->\n              <view class=\"msg-title-row\">\n                <text class=\"msg-title\">{{ msg.title }}</text>\n                <view class=\"msg-priority\" v-if=\"msg.priority === 'high'\">\n                  \n                </view>\n              </view>\n              \n              <!-- 消息简介 -->\n              <text class=\"msg-brief\">{{ msg.brief }}</text>\n              \n              <!-- 底部信息行 -->\n              <view class=\"msg-footer\">\n                <view class=\"msg-meta\">\n                  <text class=\"msg-time\">{{ formatTime(msg.time) }}</text>\n                  <text v-if=\"msg.type === 'group'\" class=\"member-count\">{{ msg.memberCount }}人</text>\n                </view>\n                <view class=\"msg-source\">\n                  <text v-if=\"msg.type === 'system'\" class=\"tag system-tag\">系统消息</text>\n                  <text v-else class=\"tag group-tag\">{{ msg.groupName }}</text>\n                </view>\n              </view>\n            </view>\n            \n            <!-- 右侧操作 - 简化 -->\n            <view class=\"msg-actions\">\n              <view class=\"action-btn\" @tap.stop=\"toggleRead(msg, index)\">\n                <text class=\"action-icon\">{{ msg.isRead ? '📖' : '👁️' }}</text>\n              </view>\n              <text class=\"chevron-icon\">›</text>\n            </view>\n          </view>\n        </recycle-item>\n        \n        <!-- 空状态 -->\n        <view v-if=\"filteredMessages.length === 0\" class=\"empty\">\n          <view class=\"empty-icon\">💬</view>\n          <text class=\"empty-title\">{{ getEmptyTitle() }}</text>\n          <text class=\"empty-desc\">{{ getEmptyDesc() }}</text>\n        </view>\n      </recycle-view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useInfoStore } from '@/store/Info.js' // 请根据你的实际路径调整\n\n// 获取用户状态管理\nconst userStore = useInfoStore()\n\n// 响应式数据\nconst statusBarHeight = ref(0)\nconst activeTab = ref('all')\n\n// 登录状态计算属性\nconst isLoggedIn = computed(() => userStore.signal)\n\nconst messages = ref([\n  {\n    id: 1,\n    type: 'system',\n    title: '系统通知',\n    brief: '您有一条新的系统消息，请及时查收。新功能已上线，快来体验吧！',\n    time: '2025-07-30 14:30',\n    isRead: false,\n    priority: 'high'\n  },\n  {\n    id: 2,\n    type: 'system',\n    title: '维护公告',\n    brief: '系统将于今晚22:00-23:00进行维护升级，期间可能影响使用。',\n    time: '2025-07-30 10:15',\n    isRead: true,\n    priority: 'normal'\n  },\n  {\n    id: 3,\n    type: 'group',\n    title: '前端开发技术分享会报名开始',\n    brief: '本次分享会将围绕Vue3最新特性、性能优化技巧以及实战案例进行深入讲解，适合有一定基础的前端开发者参与...',\n    avatar: '/static/group1.png',\n    groupName: '技术交流',\n    memberCount: 128,\n    time: '2025-07-30 16:45',\n    isRead: false,\n    priority: 'normal'\n  },\n  {\n    id: 4,\n    type: 'group',\n    title: 'Vue.js 3.4版本更新说明',\n    brief: 'Vue.js团队正式发布了3.4版本，新增了多项重要特性：响应式系统优化、组合式API增强、性能提升等...',\n    avatar: '/static/group2.png',\n    groupName: '学习讨论',\n    memberCount: 56,\n    time: '2025-07-30 12:20',\n    isRead: true,\n    priority: 'normal'\n  },\n  {\n    id: 5,\n    type: 'group',\n    title: '新项目技术方案讨论会议通知',\n    brief: '关于下一个项目的技术栈选择和架构设计，将在明天上午10点召开讨论会议，请相关同事准时参加...',\n    avatar: '/static/group3.png',\n    groupName: '工作协作',\n    memberCount: 15,\n    time: '2025-07-29 18:30',\n    isRead: false,\n    priority: 'high'\n  },\n  {\n    id: 6,\n    type: 'group',\n    title: '前端开发技术分享会报名开始报名开始宿舍还是',\n    brief: '本次分享会将围绕Vue3最新特性、性能优化技巧以及实战案例进行深入讲解，适合有一定基础的前端开发者参与...',\n    avatar: '/static/group1.png',\n    groupName: '技术交流',\n    memberCount: 128,\n    time: '2025-07-30 16:45',\n    isRead: false,\n    priority: 'normal'\n  },\n  {\n    id: 7,\n    type: 'group',\n    title: 'Vue.js 3.4版本更新说明',\n    brief: 'Vue.js团队正式发布了3.4版本，新增了多项重要特性：响应式系统优化、组合式API增强、性能提升等...',\n    avatar: '/static/group2.png',\n    groupName: '学习讨论',\n    memberCount: 56,\n    time: '2025-07-30 12:20',\n    isRead: true,\n    priority: 'normal'\n  },\n  {\n    id: 8,\n    type: 'group',\n    title: '新项目技术方案讨论会议通知新建西安报名手速还使其Iis',\n    brief: '关于下一个项目的技术栈选择和架构设计，将在明天上午10点召开讨论会议，请相关同事准时参加...',\n    avatar: '/static/group3.png',\n    groupName: '工作协作',\n    memberCount: 15,\n    time: '2025-07-29 18:30',\n    isRead: false,\n    priority: 'high'\n  }\n])\n\n// 计算属性\nconst filteredMessages = computed(() => {\n  if (!isLoggedIn.value) return []\n  if (activeTab.value === 'all') {\n    return messages.value\n  }\n  return messages.value.filter(msg => msg.type === activeTab.value)\n})\n\nconst unreadCount = computed(() => {\n  if (!isLoggedIn.value) return 0\n  return messages.value.filter(msg => !msg.isRead).length\n})\n\nconst systemUnreadCount = computed(() => {\n  if (!isLoggedIn.value) return 0\n  return messages.value.filter(msg => msg.type === 'system' && !msg.isRead).length\n})\n\nconst groupUnreadCount = computed(() => {\n  if (!isLoggedIn.value) return 0\n  return messages.value.filter(msg => msg.type === 'group' && !msg.isRead).length\n})\n\n// 生命周期\nonMounted(() => {\n  const sysInfo = uni.getSystemInfoSync()\n  statusBarHeight.value = sysInfo.statusBarHeight\n  \n  // 检查登录状态，如果未登录可以选择自动跳转到登录页\n  // if (!isLoggedIn.value) {\n  //   console.log('用户未登录，显示登录提示')\n  // }\n})\n\n// 监听登录状态变化\nwatch(isLoggedIn, (newVal) => {\n  if (newVal) {\n    console.log('用户已登录，加载消息数据')\n    // 这里可以调用API获取用户的消息数据\n    loadUserMessages()\n  } else {\n    console.log('用户已登出，清空消息数据')\n    // 可以选择清空敏感数据\n  }\n})\n\n// 登录相关方法\nconst goToLogin = () => {\n  uni.switchTab({\r\n  \turl: '../mymessage/mymessage'\r\n  });\n}\n\nconst handleLogout = () => {\n  uni.showModal({\n    title: '确认登出',\n    content: '确定要退出登录吗？',\n    success: (res) => {\n      if (res.confirm) {\n        userStore.logout() // 假设你的store有logout方法\n        uni.showToast({\n          title: '已退出登录',\n          icon: 'success'\n        })\n      }\n    }\n  })\n}\n\n// 加载用户消息数据的方法\nconst loadUserMessages = async () => {\n  try {\n    // 这里应该调用实际的API获取用户消息\n    // const response = await api.getUserMessages()\n    // messages.value = response.data\n    console.log('加载用户消息数据')\n  } catch (error) {\n    console.error('加载消息失败:', error)\n    uni.showToast({\n      title: '加载消息失败',\n      icon: 'error'\n    })\n  }\n}\n\n// 原有方法保持不变\nconst messageItemClass = (msg) => {\n  const classes = []\n  if (msg.type === 'system') classes.push('system-message')\n  if (msg.type === 'group') classes.push('group-message')\n  if (!msg.isRead) classes.push('unread')\n  return classes.join(' ')\n}\n\nconst switchTab = (tab) => {\n  activeTab.value = tab\n}\n\nconst handleMessageTap = (msg, index) => {\n  if (!isLoggedIn.value) return\n  \n  // 标记为已读\n  if (!msg.isRead) {\n    const messageIndex = messages.value.findIndex(m => m.id === msg.id)\n    messages.value[messageIndex].isRead = true\n  }\n  \n  // 跳转到详情页面\n  if (msg.type === 'system') {\n    uni.navigateTo({\n      url: `/pages/system-message/index?id=${msg.id}`\n    })\n  } else {\n    uni.navigateTo({\n      url: `/pages/group-chat/index?groupId=${msg.id}`\n    })\n  }\n}\n\nconst toggleRead = (msg, index) => {\n  if (!isLoggedIn.value) return\n  \n  const messageIndex = messages.value.findIndex(m => m.id === msg.id)\n  messages.value[messageIndex].isRead = !msg.isRead\n}\n\n// 优化时间格式化 - 缓存结果\nconst timeCache = new Map()\nconst formatTime = (time) => {\n  if (timeCache.has(time)) {\n    return timeCache.get(time)\n  }\n  \n  const now = new Date()\n  const msgTime = new Date(time)\n  const diff = now - msgTime\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24))\n  \n  let result\n  if (days === 0) {\n    const hours = Math.floor(diff / (1000 * 60 * 60))\n    if (hours === 0) {\n      const minutes = Math.floor(diff / (1000 * 60))\n      result = minutes <= 0 ? '刚刚' : `${minutes}分钟前`\n    } else {\n      result = `${hours}小时前`\n    }\n  } else if (days === 1) {\n    result = '昨天'\n  } else if (days <= 7) {\n    result = `${days}天前`\n  } else {\n    result = time.split(' ')[0]\n  }\n  \n  timeCache.set(time, result)\n  return result\n}\n\nconst handleAvatarError = () => {\n  console.log('头像加载失败')\n}\n\nconst getEmptyTitle = () => {\n  const titles = {\n    all: '暂无消息',\n    system: '暂无系统消息',\n    group: '暂无群组消息'\n  }\n  return titles[activeTab.value]\n}\n\nconst getEmptyDesc = () => {\n  const descs = {\n    all: '目前还没有任何消息',\n    system: '暂时没有系统通知',\n    group: '您还未加入任何群组'\n  }\n  return descs[activeTab.value]\n}\n\nconst markAllAsRead = () => {\n  if (!isLoggedIn.value) return\n  \n  const currentMessages = activeTab.value === 'all' \n    ? messages.value \n    : messages.value.filter(msg => msg.type === activeTab.value)\n  \n  const unreadMessages = currentMessages.filter(msg => !msg.isRead)\n  \n  unreadMessages.forEach(msg => {\n    const messageIndex = messages.value.findIndex(m => m.id === msg.id)\n    if (messageIndex !== -1) {\n      messages.value[messageIndex].isRead = true\n    }\n  })\n  \n  // 显示成功提示\n  uni.showToast({\n    title: `已标记${unreadMessages.length || '所有'}条消息为已读`,\n    icon: 'success',\n    duration: 1500\n  })\n}\n</script>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  background-color: #f5f6fa;\n}\n\n/* 登录提示样式 */\n.login-required {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 40rpx;\n  background: linear-gradient(135deg, #ff4757 0%, #ff6b7a 100%);\n}\n\n.login-card {\n  background: white;\n  border-radius: 24rpx;\n  padding: 60rpx 40rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  box-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.1);\n  width: 100%;\n  max-width: 600rpx;\n}\n\n.login-icon {\n  font-size: 80rpx;\n  margin-bottom: 20rpx;\n  opacity: 0.8;\n}\n\n.login-title {\n  font-size: 36rpx;\n  font-weight: 600;\n  color: #2d3748;\n  margin-bottom: 16rpx;\n}\n\n.login-desc {\n  font-size: 28rpx;\n  color: #718096;\n  margin-bottom: 40rpx;\n  line-height: 1.5;\n}\n\n.login-btn {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  border: none;\n  border-radius: 50rpx;\n  padding: 24rpx 60rpx;\n  font-size: 32rpx;\n  font-weight: 600;\n  box-shadow: 0 8rpx 24rpx rgba(102, 126, 234, 0.3);\n  transition: all 0.3s ease;\n}\n\n.login-btn:active {\n  transform: translateY(2rpx);\n  box-shadow: 0 4rpx 12rpx rgba(102, 126, 234, 0.4);\n}\n\n.login-btn-text {\n  color: white;\n}\n\n/* 消息容器 */\n.message-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n/* 自定义导航栏 */\n.custom-navbar {\n  background-color: #ff4757;\n  color: white;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  z-index: 999;\n}\n\n.status-bar {\n  width: 100%;\n}\n\n.nav-content {\n  height: 44px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n}\n\n.nav-title {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.nav-right {\n  display: flex;\n  align-items: center;\n}\n\n.logout-btn {\n  padding: 6px 12px;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.3);\n}\n\n.logout-text {\n  color: white;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n/* 固定筛选标签 - 重新布局 */\n.filter-tabs-fixed {\n  position: fixed;\n  left: 0;\n  width: 100%;\n  z-index: 998;\n  background: #f5f6fa;\n  padding: 12px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid rgba(0,0,0,0.05);\n}\n\n.tabs-container {\n  display: flex;\n  gap: 8px;\n}\n\n.filter-tab {\n  padding: 8px 16px;\n  background: white;\n  border-radius: 20px;\n  font-size: 14px;\n  color: #666;\n  border: 2px solid transparent;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  position: relative;\n}\n\n.filter-tab.active {\n  background: #903749;\n  color: white;\n  box-shadow: 0 4px 12px rgba(144, 55, 73, 0.3);\n}\n\n.tab-badge {\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  background: #ff4757;\n  color: white;\n  font-size: 10px;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  border: 2px solid white;\n}\n\n/* 一键已读按钮 */\n.mark-all-read-btn {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 12px;\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  border-radius: 16px;\n  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);\n  color: white;\n  font-size: 13px;\n  font-weight: 600;\n}\n\n.mark-all-read-btn:active {\n  transform: scale(0.95);\n  box-shadow: 0 1px 4px rgba(16, 185, 129, 0.4);\n}\n\n.mark-all-icon {\n  font-size: 14px;\n  font-weight: bold;\n}\n\n.mark-all-text {\n  font-size: 12px;\n}\n\n/* 消息列表 - 使用recycle-view优化 */\n.message-list {\n  flex: 1;\n  background: #f5f6fa;\n  padding: 0 16px;\n  padding-bottom: 20px;\n}\n\n.message-item-wrapper {\n  margin-bottom: 12px;\n}\n\n/* 消息项 - 现代卡片设计 */\n.message-item {\n  background: white;\n  border-radius: 16px;\n  padding: 18px;\n  display: flex;\n  align-items: flex-start;\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);\n  border: 1px solid #f0f2f5;\n  position: relative;\n  overflow: hidden;\n}\n\n.message-item::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 4px;\n  height: 100%;\n  background: linear-gradient(180deg, #e9ecef 0%, #dee2e6 100%);\n}\n\n.message-item.system-message {\n  background: linear-gradient(135deg, rgba(255, 107, 107, 0.03) 0%, rgba(238, 90, 36, 0.02) 100%);\n  border-color: rgba(255, 107, 107, 0.08);\n}\n\n.message-item.system-message::before {\n  background: linear-gradient(180deg, #ff6b6b 0%, #ee5a24 100%);\n  box-shadow: 0 0 8px rgba(255, 107, 107, 0.3);\n}\n\n.message-item.group-message {\n  background: linear-gradient(135deg, rgba(72, 52, 212, 0.03) 0%, rgba(102, 126, 234, 0.02) 100%);\n  border-color: rgba(72, 52, 212, 0.08);\n}\n\n.message-item.group-message::before {\n  background: linear-gradient(180deg, #4834d4 0%, #667eea 100%);\n  box-shadow: 0 0 8px rgba(72, 52, 212, 0.3);\n}\n\n.message-item.unread {\n  background: linear-gradient(135deg, rgba(16, 185, 129, 0.03) 0%, rgba(34, 197, 94, 0.02) 100%);\n  border-color: rgba(16, 185, 129, 0.12);\n  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.08);\n}\n\n.message-item.unread::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  right: 0;\n  width: 0;\n  height: 0;\n  border-left: 20px solid transparent;\n  border-top: 20px solid #10b981;\n  opacity: 0.1;\n}\n\n/* 消息指示器 - 现代化设计 */\n.message-indicator {\n  margin-right: 14px;\n  padding-top: 6px;\n}\n\n.indicator-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: #e9ecef;\n  position: relative;\n}\n\n.indicator-dot::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 4px;\n  height: 4px;\n  border-radius: 50%;\n  background: white;\n}\n\n.indicator-dot.system {\n  background: linear-gradient(45deg, #ff6b6b 0%, #ee5a24 100%);\n  box-shadow: 0 2px 8px rgba(255, 107, 107, 0.3);\n}\n\n.indicator-dot.group {\n  background: linear-gradient(45deg, #4834d4 0%, #667eea 100%);\n  box-shadow: 0 2px 8px rgba(72, 52, 212, 0.3);\n}\n\n/* 头像容器 - 优化设计 */\n.avatar-container {\n  position: relative;\n  margin-right: 14px;\n}\n\n.avatar {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  border: 2px solid #f8f9fa;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.group-avatar {\n  border-color: rgba(72, 52, 212, 0.15);\n}\n\n.system-icon {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 4px 12px rgba(255, 107, 107, 0.25);\n  border: 2px solid rgba(255, 255, 255, 0.2);\n}\n\n.system-icon .icon {\n  font-size: 20px;\n  filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.1));\n}\n\n/* 显眼的未读小红点 */\n.unread-badge {\n  position: absolute;\n  top: -4px;\n  right: -4px;\n  width: 16px;\n  height: 16px;\n  background: linear-gradient(135deg, #ff4757 0%, #ff3838 100%);\n  border-radius: 50%;\n  border: 3px solid white;\n  box-shadow: 0 2px 8px rgba(255, 71, 87, 0.4);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n}\n\n.unread-badge::before {\n  content: '';\n  width: 6px;\n  height: 6px;\n  background: rgba(255, 255, 255, 0.9);\n  border-radius: 50%;\n  animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n  0% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.1);\n    opacity: 0.7;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n/* 消息内容 - 重新布局 */\n.msg-content {\n  flex: 1;\n  min-width: 0;\n}\n\n/* 标题行 - 独立一行 */\n.msg-title-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 6px;\n  gap: 12px;\n}\n\n.msg-title {\n  font-weight: 600;\n  font-size: 16px;\n  color: #1a202c;\n  flex: 1;\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  line-height: 1.3;\n}\n\n.msg-priority {\n  flex-shrink: 0;\n}\n\n.msg-brief {\n  color: #4a5568;\n  font-size: 14px;\n  line-height: 1.4;\n  margin-bottom: 8px;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n/* 底部信息行 */\n.msg-footer {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n}\n\n.msg-meta {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 12px;\n}\n\n.msg-time {\n  color: #718096;\n  font-weight: 500;\n}\n\n.member-count {\n  background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);\n  color: #4a5568;\n  padding: 2px 8px;\n  border-radius: 8px;\n  font-weight: 500;\n  border: 1px solid #e2e8f0;\n}\n\n.msg-source {\n  flex-shrink: 0;\n}\n\n.tag {\n  font-size: 11px;\n  padding: 3px 8px;\n  border-radius: 12px;\n  font-weight: 600;\n  letter-spacing: 0.3px;\n  line-height: 1;\n}\n\n.system-tag {\n  background: linear-gradient(135deg, rgba(255, 107, 107, 0.15) 0%, rgba(238, 90, 36, 0.1) 100%);\n  color: #dc2626;\n  border: 1px solid rgba(255, 107, 107, 0.2);\n}\n\n.group-tag {\n  background: linear-gradient(135deg, rgba(72, 52, 212, 0.15) 0%, rgba(102, 126, 234, 0.1) 100%);\n  color: #4338ca;\n  border: 1px solid rgba(72, 52, 212, 0.2);\n}\n\n.priority-tag {\n  background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(217, 119, 6, 0.1) 100%);\n  color: #d97706;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n\n/* 右侧操作 - 现代化操作区 */\n.msg-actions {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-left: 12px;\n}\n\n.action-btn {\n  width: 32px;\n  height: 32px;\n  border-radius: 10px;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #e2e8f0;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.action-btn:active {\n  transform: scale(0.95);\n  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e0 100%);\n}\n\n.action-icon {\n  font-size: 14px;\n}\n\n.chevron-icon {\n  font-size: 20px;\n  color: #a0aec0;\n  font-weight: bold;\n  opacity: 0.6;\n}\n\n/* 空状态 */\n.empty {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 60px 20px;\n  text-align: center;\n}\n\n.empty-icon {\n  font-size: 48px;\n  margin-bottom: 12px;\n  opacity: 0.3;\n}\n\n.empty-title {\n  font-size: 16px;\n  font-weight: 500;\n  color: #495057;\n  margin-bottom: 6px;\n}\n\n.empty-desc {\n  font-size: 13px;\n  color: #adb5bd;\n}\r\n</style>","import MiniProgramPage from 'E:/project/uniapp/uniapp-news/pages/mes/mes.vue'\nwx.createPage(MiniProgramPage)"],"names":["useInfoStore","ref","computed","onMounted","uni","watch"],"mappings":"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"}