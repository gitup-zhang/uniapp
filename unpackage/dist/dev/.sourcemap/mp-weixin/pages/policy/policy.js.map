{"version":3,"file":"policy.js","sources":["pages/policy/policy.vue","D:/Hbuild/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcG9saWN5L3BvbGljeS52dWU"],"sourcesContent":["<template>  \n  <uni-nav-bar statusBar=\"true\" backgroundColor=\"#903749\" fixed=\"true\">\n    <template v-slot:left>\n      <view class=\"navbar-title\">政策</view>\n    </template>\n  </uni-nav-bar>\n\n  <uni-search-bar \n    @confirm=\"search\" \n    placeholder=\"搜索行业政策\" \n    v-model=\"searchbar\" \n    @cancel=\"cancel\">\n  </uni-search-bar>\n\n  <!-- <uni-segmented-control\n    :current=\"current\"\n    :values=\"value\"\n    @clickItem=\"onClickItem\"\n    styleType=\"text\"\n    activeColor=\"#ff0000\"\n  ></uni-segmented-control> -->\n\n  <!-- 主容器 -->\n  <view class=\"container\">\n    <!-- 筛选容器：用于相对定位 -->\n    <view class=\"filter-wrapper\">\n      <view class=\"filter-bar\">\n        <view class=\"filter-item\" @click=\"toggleDropdown('domain')\">\n          {{ selectedDomain }}\n          <view class=\"arrow\" :class=\"{ open: currentDropdown === 'domain' }\"></view>\n        </view>\n        <view class=\"filter-item\" @click=\"toggleDropdown('time')\">\n          {{ selectedTime }}\n          <view class=\"arrow\" :class=\"{ open: currentDropdown === 'time' }\"></view>\n        </view>\n      </view>\n\n      <!-- 下拉菜单：政策领域 -->\n      <view v-if=\"currentDropdown === 'domain'\" class=\"dropdown-list\">\n        <view\n          class=\"dropdown-item\"\n          v-for=\"item in domainList\"\n          :key=\"item\"\n          @click=\"selectOption('domain', item)\"\n          :class=\"{ selected: selectedDomain === item }\"\n        >\n          {{ item }}\n        </view>\n      </view>\n\n      <!-- 下拉菜单：发布时间 -->\n      <view v-if=\"currentDropdown === 'time'\" class=\"dropdown-list\">\n        <view\n          class=\"dropdown-item\"\n          v-for=\"item in timeList\"\n          :key=\"item\"\n          @click=\"selectOption('time', item)\"\n          :class=\"{ selected: selectedTime === item }\"\n        >\n          {{ item }}\n        </view>\n      </view>\n    </view>\n\n    <!-- 新闻卡片列表 -->\n    <uni-card \n      :title=\"item.policy_title\" \n      :extra=\"Dataformat(item.release_time)\" \n      v-for=\"item in listpolicy.listpolicy\" \n      :key=\"item.id\"\r\n\t  @click=\"OnClick(item.id)\"\n    >\n      <text>{{item.brief_content}}</text>\n    </uni-card>\n  </view>\n</template>\n<script setup>\nimport { ref, computed ,onMounted} from 'vue'\r\nimport {usePolicyStore} from '@/store/PolicyList.js'\r\nimport dayjs from 'dayjs'\r\n// 从pinia中获得对象\r\nconst listpolicy = usePolicyStore()\r\n\r\n// 搜索栏\r\nconst searchbar = ref(\"\")\r\n\r\n// 下拉筛选逻辑\r\nconst currentDropdown = ref(null)\r\nconst selectedDomain = ref('政策领域')\r\nconst selectedTime = ref('发布时间')\r\n\r\nconst domainList = ['全部', '教育', '科技', '医疗']\r\nconst timeList = ['全部', '最近一周', '最近一月', '最近一年']\r\n\r\n\nonMounted(()=>{\r\n\tlistpolicy.getlistpolicy()\r\n})\n\n// 搜索栏函数\nfunction search() {\n  console.log(\"搜索关键词:\", searchbar.value)\n}\n\nfunction cancel() {\n  searchbar.value = \"\"\n}\n\n// 分段器\n// const current = ref(0)\n// const classify = [\n//   { key: \"all\", value: \"全部\" },\n//   { key: \"k1\", value: \"分类1\" },\n//   { key: \"k2\", value: \"分类2\" }\n// ]\n// const value = computed(() => classify.map(item => item.value))\n// function onClickItem(e) {\n//   current.value = e.currentIndex\n// }\n\n\n// 下拉菜单函数\nfunction toggleDropdown(type) {\n  currentDropdown.value = currentDropdown.value === type ? null : type\n}\n\nfunction selectOption(type, value) {\n  if (type === 'domain') {\n    selectedDomain.value = value\n  } else if (type === 'time') {\n    selectedTime.value = value\n  }\n  currentDropdown.value = null\n}\r\n// 获取详细政策\r\nfunction OnClick(id){\r\n\tuni.navigateTo({\r\n\t\turl: `/pages/detail/detailpolicy?id=${id}`\r\n\t});\r\n}\r\n// 时间格式化函数\r\nfunction Dataformat(timeStr){\r\n\treturn dayjs(timeStr).format('YYYY-MM-DD HH:mm:ss')\r\n}\r\n\n</script>\n<style scoped>\n@import \"../../style/new_policy.css\";\n</style>\n","import MiniProgramPage from 'E:/project/uniapp/uniapp-news/pages/policy/policy.vue'\nwx.createPage(MiniProgramPage)"],"names":["usePolicyStore","ref","onMounted","uni","dayjs"],"mappings":";;;;;;;;;;;;;;;;;;AAiFA,UAAM,aAAaA,iBAAAA,eAAgB;AAGnC,UAAM,YAAYC,cAAG,IAAC,EAAE;AAGxB,UAAM,kBAAkBA,cAAG,IAAC,IAAI;AAChC,UAAM,iBAAiBA,cAAG,IAAC,MAAM;AACjC,UAAM,eAAeA,cAAG,IAAC,MAAM;AAE/B,UAAM,aAAa,CAAC,MAAM,MAAM,MAAM,IAAI;AAC1C,UAAM,WAAW,CAAC,MAAM,QAAQ,QAAQ,MAAM;AAG9CC,kBAAAA,UAAU,MAAI;AACb,iBAAW,cAAe;AAAA,IAC3B,CAAC;AAGD,aAAS,SAAS;AAChBC,oBAAY,MAAA,MAAA,OAAA,kCAAA,UAAU,UAAU,KAAK;AAAA,IACvC;AAEA,aAAS,SAAS;AAChB,gBAAU,QAAQ;AAAA,IACpB;AAgBA,aAAS,eAAe,MAAM;AAC5B,sBAAgB,QAAQ,gBAAgB,UAAU,OAAO,OAAO;AAAA,IAClE;AAEA,aAAS,aAAa,MAAM,OAAO;AACjC,UAAI,SAAS,UAAU;AACrB,uBAAe,QAAQ;AAAA,MAC3B,WAAa,SAAS,QAAQ;AAC1B,qBAAa,QAAQ;AAAA,MACtB;AACD,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,aAAS,QAAQ,IAAG;AACnBA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,iCAAiC,EAAE;AAAA,MAC1C,CAAE;AAAA,IACF;AAEA,aAAS,WAAW,SAAQ;AAC3B,aAAOC,oBAAM,OAAO,EAAE,OAAO,qBAAqB;AAAA,IACnD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9IA,GAAG,WAAW,eAAe;"}