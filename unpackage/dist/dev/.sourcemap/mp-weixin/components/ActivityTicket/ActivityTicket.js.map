{"version":3,"file":"ActivityTicket.js","sources":["components/ActivityTicket/ActivityTicket.vue","D:/Hbuild/HBuilderX.4.64.2025042916/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovcHJvamVjdC91bmlhcHAvdW5pYXBwLW5ld3MvY29tcG9uZW50cy9BY3Rpdml0eVRpY2tldC9BY3Rpdml0eVRpY2tldC52dWU"],"sourcesContent":["<template>\n  <view class=\"ticket-container\">\n    <view class=\"ticket\">\n      <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫ -->\n      <view class=\"ticket-main\">\n        <view class=\"title\">{{ props.activityData.title }}</view>\n        \n        <view class=\"info-list\">\n          <view class=\"info-item\">\n            <text class=\"icon\">üìç</text>\n            <text class=\"text\">{{ props.activityData.event_address }}</text>\n          </view>\n          <view class=\"info-item\">\n            <text class=\"icon\">üìÖ</text>\n            <text class=\"text\">{{ formatEventDate(props.activityData.event_start_time, props.activityData.event_end_time)}}</text>\n          </view>\n        </view>\n      </view>\n      \n      <!-- ÂàÜÂâ≤Á∫ø -->\n      <view class=\"divider\">\n        <view class=\"dashed-line\"></view>\n        <view class=\"notch notch-left\"></view>\n        <view class=\"notch notch-right\"></view>\n      </view>\n      \n      <!-- ÊåâÈíÆÂå∫ -->\n      <view class=\"ticket-bottom\">\n        <button \n          :class=\"['action-btn', checkInButtonConfig.class]\" \n          :disabled=\"checkInButtonConfig.disabled\"\n          @click=\"handleAction\"\n        >\n          {{ checkInButtonConfig.text }}\n        </button>\n        <button class=\"cancel-btn\" @click=\"handleCancel\">\n          ÂèñÊ∂àÊä•Âêç\n        </button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { formatEventDate } from '@/utils/data.js'\nimport { computed, ref, onMounted, onUnmounted } from 'vue'\n\n// Props\nconst props = defineProps({\n  activityData: {\n    type: Object,\n    default: () => ({\n      id: 0,\n      title: '',\n      event_address: '',\n      event_end_time: \"\",\n      event_start_time: \"\",\n    })\n  }\n})\n\n// Emits\nconst emit = defineEmits(['action', 'cancel'])\n\n// ÂìçÂ∫îÂºèÊï∞ÊçÆ\nconst currentTime = ref(new Date())\nlet timer = null\n\n// ÁîüÂëΩÂë®Êúü\nonMounted(() => {\n  // ÊØèÂàÜÈíüÊõ¥Êñ∞‰∏ÄÊ¨°ÂΩìÂâçÊó∂Èó¥\n  timer = setInterval(() => {\n    currentTime.value = new Date()\n  }, 60000)\n})\n\nonUnmounted(() => {\n  if (timer) {\n    clearInterval(timer)\n  }\n})\n\n// Êó∂Èó¥Áä∂ÊÄÅËÆ°ÁÆó\nconst timeStatus = computed(() => {\n  const now = currentTime.value.getTime()\n  const startTime = new Date(props.activityData.event_start_time).getTime()\n  const endTime = new Date(props.activityData.event_end_time).getTime()\n  \n  if (now < startTime) return 'not_started'\n  if (now >= startTime && now <= endTime) return 'ongoing'\n  return 'expired'\n})\n\n// Á≠æÂà∞ÊåâÈíÆÈÖçÁΩÆ\nconst checkInButtonConfig = computed(() => {\n  switch (timeStatus.value) {\n    case 'not_started':\n      return {\n        text: 'Êú™ÂºÄÂßã',\n        disabled: true,\n        class: 'not-started'\n      }\n    case 'ongoing':\n      return {\n        text: 'Á≠æÂà∞',\n        disabled: false,\n        class: 'active'\n      }\n    case 'expired':\n      return {\n        text: 'Â∑≤ÁªìÊùü',\n        disabled: true,\n        class: 'expired'\n      }\n    default:\n      return {\n        text: 'Á≠æÂà∞',\n        disabled: false,\n        class: 'active'\n      }\n  }\n})\n\n// ÊñπÊ≥ï\nconst handleAction = () => {\n  if (!checkInButtonConfig.value.disabled) {\n    emit('action', props.activityData)\n  }\n}\n\nconst handleCancel = () => {\n  emit('cancel', props.activityData)\n}\n</script>\n\n<style scoped>\n.ticket-container {\n  padding: 20rpx;\n}\n\n.ticket {\n  background: #fff;\n  border-radius: 20rpx;\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n  position: relative;\n}\n\n/* ‰∏ªË¶ÅÂÜÖÂÆπÂå∫ */\n.ticket-main {\n  padding: 40rpx 32rpx 30rpx;\n}\n\n.title {\n  font-size: 32rpx;\n  font-weight: bold;\n  color: #333;\n  text-align: center;\n  margin-bottom: 40rpx;\n  line-height: 1.4;\n}\n\n.info-list {\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  gap: 16rpx;\n}\n\n.icon {\n  font-size: 24rpx;\n  width: 40rpx;\n  text-align: center;\n}\n\n.text {\n  font-size: 26rpx;\n  color: #666;\n  flex: 1;\n  line-height: 1.5;\n}\n\n/* ÂàÜÂâ≤Á∫ø */\n.divider {\n  position: relative;\n  height: 1rpx;\n  margin: 0 20rpx;\n}\n\n.dashed-line {\n  height: 1rpx;\n  background-image: repeating-linear-gradient(\n    to right,\n    #ddd 0,\n    #ddd 8rpx,\n    transparent 8rpx,\n    transparent 16rpx\n  );\n}\n\n.notch {\n  position: absolute;\n  top: -15rpx;\n  width: 30rpx;\n  height: 30rpx;\n  background: #f5f5f5;\n  border-radius: 50%;\n}\n\n.notch-left {\n  left: -35rpx;\n}\n\n.notch-right {\n  right: -35rpx;\n}\n\n/* ÊåâÈíÆÂå∫ */\n.ticket-bottom {\n  padding: 30rpx 32rpx 40rpx;\n  display: flex;\n  flex-direction: column;\n  gap: 20rpx;\n}\n\n.action-btn {\n  width: 100%;\n  height: 80rpx;\n  border: none;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n/* Ê¥ªË∑ÉÁä∂ÊÄÅ - ÂèØ‰ª•Á≠æÂà∞ */\n.action-btn.active {\n  background: linear-gradient(135deg, #ff416c, #ff4b2b);\n  color: white;\n  box-shadow: 0 6rpx 20rpx rgba(255, 65, 108, 0.3);\n}\n\n.action-btn.active:active {\n  transform: translateY(2rpx);\n  box-shadow: 0 4rpx 15rpx rgba(255, 65, 108, 0.4);\n}\n\n/* Êú™ÂºÄÂßãÁä∂ÊÄÅ */\n.action-btn.not-started {\n  background: linear-gradient(135deg, #fbbf24, #f59e0b);\n  color: white;\n  box-shadow: 0 6rpx 20rpx rgba(251, 191, 36, 0.3);\n  opacity: 0.7;\n}\n\n/* Â∑≤ÁªìÊùüÁä∂ÊÄÅ */\n.action-btn.expired {\n  background: linear-gradient(135deg, #9ca3af, #6b7280);\n  color: white;\n  box-shadow: 0 6rpx 20rpx rgba(156, 163, 175, 0.3);\n  opacity: 0.7;\n}\n\n/* Á¶ÅÁî®Áä∂ÊÄÅ */\n.action-btn:disabled {\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n.action-btn.not-started:active,\n.action-btn.expired:active {\n  transform: none;\n}\n\n.cancel-btn {\n  width: 100%;\n  height: 80rpx;\n  background: #fff;\n  color: #999;\n  border: 2rpx solid #e5e5e5;\n  border-radius: 40rpx;\n  font-size: 28rpx;\n  font-weight: bold;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n\n.cancel-btn:active {\n  transform: translateY(2rpx);\n  background: #f8f8f8;\n  border-color: #ddd;\n  color: #666;\n}\n</style>","import Component from 'E:/project/uniapp/uniapp-news/components/ActivityTicket/ActivityTicket.vue'\nwx.createComponent(Component)"],"names":["ref","onMounted","onUnmounted","computed"],"mappings":";;;;;;;;;;;;;;;;;;;AAgDA,UAAM,QAAQ;AAcd,UAAM,OAAO;AAGb,UAAM,cAAcA,cAAAA,IAAI,oBAAI,MAAM;AAClC,QAAI,QAAQ;AAGZC,kBAAAA,UAAU,MAAM;AAEd,cAAQ,YAAY,MAAM;AACxB,oBAAY,QAAQ,oBAAI,KAAM;AAAA,MAC/B,GAAE,GAAK;AAAA,IACV,CAAC;AAEDC,kBAAAA,YAAY,MAAM;AAChB,UAAI,OAAO;AACT,sBAAc,KAAK;AAAA,MACpB;AAAA,IACH,CAAC;AAGD,UAAM,aAAaC,cAAQ,SAAC,MAAM;AAChC,YAAM,MAAM,YAAY,MAAM,QAAS;AACvC,YAAM,YAAY,IAAI,KAAK,MAAM,aAAa,gBAAgB,EAAE,QAAS;AACzE,YAAM,UAAU,IAAI,KAAK,MAAM,aAAa,cAAc,EAAE,QAAS;AAErE,UAAI,MAAM;AAAW,eAAO;AAC5B,UAAI,OAAO,aAAa,OAAO;AAAS,eAAO;AAC/C,aAAO;AAAA,IACT,CAAC;AAGD,UAAM,sBAAsBA,cAAQ,SAAC,MAAM;AACzC,cAAQ,WAAW,OAAK;AAAA,QACtB,KAAK;AACH,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,UAAU;AAAA,YACV,OAAO;AAAA,UACR;AAAA,QACH,KAAK;AACH,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,UAAU;AAAA,YACV,OAAO;AAAA,UACR;AAAA,QACH,KAAK;AACH,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,UAAU;AAAA,YACV,OAAO;AAAA,UACR;AAAA,QACH;AACE,iBAAO;AAAA,YACL,MAAM;AAAA,YACN,UAAU;AAAA,YACV,OAAO;AAAA,UACR;AAAA,MACJ;AAAA,IACH,CAAC;AAGD,UAAM,eAAe,MAAM;AACzB,UAAI,CAAC,oBAAoB,MAAM,UAAU;AACvC,aAAK,UAAU,MAAM,YAAY;AAAA,MAClC;AAAA,IACH;AAEA,UAAM,eAAe,MAAM;AACzB,WAAK,UAAU,MAAM,YAAY;AAAA,IACnC;;;;;;;;;;;;;;;;ACnIA,GAAG,gBAAgB,SAAS;"}